{% extends "base.html" %} 

{% block title %}
    {# Si object existe (Edici贸n), muestra el t铆tulo del libro, si no (Creaci贸n), muestra 'Crear Libro' #}
    {% if object %}
        Editar Libro: {{ object.titulo }}
    {% else %}
        Crear Libro
    {% endif %}
{% endblock %}

{% block content %}

    {% if object %}
        <h1>Editar Libro: {{ object.titulo }}</h1>
    {% else %}
        <h1>Crear Nuevo Libro</h1>
    {% endif %}
    
    <form method="post">
        
        {% csrf_token %}
        
        <div class="form-fields">
            {{ form.as_p }} 
        </div>
        
        <button type="submit" class="btn btn-primary">Guardar</button>
        
        {#  LNEA CRTICA CORREGIDA (Probablemente tu L铆nea 17)  #}
        {# 
           Si el objeto existe (Edici贸n), el bot贸n Cancelar va al detalle del libro.
           Si el objeto NO existe (Creaci贸n), el bot贸n Cancelar va a la lista principal. 
        #}
        {% if object %}
            <a href="{% url 'libros:detalle_libro' libro.slug %}" class="btn btn-secondary">Cancelar</a>
        {% else %}
            <a href="{% url 'home' %}" class="btn btn-secondary">Cancelar</a>
        {% endif %}

    </form>

{% endblock content %}